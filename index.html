<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Virtual Chemistry Lab - Class 12</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif;}
body{overflow-x:hidden;text-align:center;color:#fff;background:#0b0c10;position:relative;}
video#bgVideo{position:fixed;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-2;filter:brightness(0.5);}
canvas#effectCanvas{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;}
.lab-container{padding:20px;position:relative;z-index:2;}
h1{margin-bottom:10px;}
.chemicals{display:flex;justify-content:center;gap:10px;margin:20px 0;flex-wrap:wrap;}
.chemical{background: rgba(255,255,255,0.2); padding:12px 20px; border-radius:10px; cursor:grab; transition: transform 0.3s;}
.chemical:active{transform:scale(1.1);}
.beaker{width:220px;height:260px;margin:0 auto;border:4px solid #fff;border-radius:0 0 20px 20px;display:flex;justify-content:center;align-items:flex-end;padding-bottom:20px;background:rgba(255,255,255,0.1);position:relative;overflow:hidden;}
#reactionResult{margin-top:20px;font-size:1.3em;min-height:60px;}
#presetButtons{margin-top:20px;}
.presetBtn{background:rgba(255,255,255,0.2);border:none;color:#fff;padding:10px 15px;margin:5px;border-radius:8px;cursor:pointer;transition:0.2s;}
.presetBtn:hover{background:rgba(255,255,255,0.4);}
#reactionSelector{margin-top:20px;padding:10px;border-radius:8px;border:none;font-size:1em;}
#bigWarning{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:red;color:white;font-size:5em;display:flex;justify-content:center;align-items:center;z-index:999;}
.bubble{position:absolute;width:10px;height:10px;background:rgba(255,255,255,0.8);border-radius:50%;bottom:20px;animation: rise 2s linear infinite;}
@keyframes rise {0%{transform:translateY(0);opacity:1}100%{transform:translateY(-200px);opacity:0}}
</style>
</head>
<body>

<video autoplay muted loop id="bgVideo">
  <source src="https://www.w3schools.com/howto/rain.mp4" type="video/mp4">
</video>

<canvas id="effectCanvas"></canvas>
<div id="bigWarning">⚠️ EXOTHERMIC REACTION! ⚠️</div>

<div class="lab-container">
<h1>Class 12 Virtual Chemistry Lab</h1>
<p>Drag chemicals into the beaker or use presets / dropdown!</p>

<div class="chemicals" id="chemicalList"></div>

<div class="beaker" id="beaker"><p>Drop chemicals here</p></div>
<div id="reactionResult"></div>

<div id="presetButtons"></div>

<select id="reactionSelector">
  <option value="">Select any reaction...</option>
</select>

</div>

<script>
// ===== Canvas Setup =====
const canvas=document.getElementById('effectCanvas');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

// ===== Chemicals =====
const chemicalsArray=['Na','H2O','HCl','NaOH','K','Cl2','Mg','O2','CaCO3','H2SO4','Cu','Fe','Zn','AgNO3','BaCl2','NH3','Pb(NO3)2','KI','Al','Fe2O3','H2','CO2','CH4','C2H5OH','Na2CO3','Ca','P','Br2','I2','SO2','Na2SO4'];

// ===== Reactions Array (100 simplified example reactions) =====
const reactions = [];
for(let i=1;i<=100;i++){
  reactions.push({
    reactants: ["Na","H2O"], // You can change each reaction as needed
    products: ["NaOH","H2"],
    type: "exothermic",
    message: `Reaction #${i}: 2Na + 2H₂O → 2NaOH + H₂ (Example)`
  });
}

// ===== Generate Chemical Buttons =====
const chemicalDiv=document.getElementById('chemicalList');
chemicalsArray.forEach(c=>{
  const el=document.createElement('div');
  el.className='chemical';
  el.id=c;
  el.draggable=true;
  el.innerHTML=c;
  chemicalDiv.appendChild(el);
});

// ===== Quick Preset Buttons =====
const presets=[
  {name:'Na + H2O',chems:['Na','H2O']},
  {name:'HCl + NaOH',chems:['HCl','NaOH']},
  {name:'K + H2O',chems:['K','H2O']},
  {name:'Mg + O2',chems:['Mg','O2']}
];
const presetContainer=document.getElementById('presetButtons');
presets.forEach(p=>{
  const btn=document.createElement('button');
  btn.className='presetBtn';
  btn.innerText=p.name;
  btn.onclick=()=>triggerPreset(p.chems);
  presetContainer.appendChild(btn);
});

// ===== Reaction Dropdown =====
const reactionSelector=document.getElementById('reactionSelector');
reactions.forEach((r,i)=>{
  const opt=document.createElement('option');
  opt.value=i;
  opt.innerText=r.message;
  reactionSelector.appendChild(opt);
});
reactionSelector.onchange=function(){
  const rIndex=parseInt(this.value);
  if(!isNaN(rIndex)) triggerPreset(reactions[rIndex].reactants);
};

// ===== Drag & Drop =====
let droppedChemicals=[];
const beaker=document.getElementById('beaker');
const reactionResult=document.getElementById('reactionResult');
const bigWarning=document.getElementById('bigWarning');

document.querySelectorAll('.chemical').forEach(c=>{
  c.addEventListener('dragstart',e=>{ e.dataTransfer.setData('text',c.id); });
});
beaker.addEventListener('dragover',e=>e.preventDefault());
beaker.addEventListener('drop',e=>{
  e.preventDefault();
  const chem=e.dataTransfer.getData('text');
  if(!droppedChemicals.includes(chem)){
    droppedChemicals.push(chem);
    reactionResult.innerHTML=checkReaction(droppedChemicals);
  }
});

// ===== Functions =====
function triggerPreset(chems){
  droppedChemicals=chems.slice();
  reactionResult.innerHTML=checkReaction(droppedChemicals);
}

function checkReaction(arr){
  for(let r of reactions){
    if(r.reactants.every(c=>arr.includes(c)) && r.reactants.length===arr.length){
      if(r.type==='exothermic'){showBigWarning(); createParticles(); playSound('exothermic');}
      else if(r.type==='endothermic'){createBubbles(); playSound('endothermic');}
      return r.message;
    }
  }
  return '⚠️ No significant reaction!';
}

function showBigWarning(){ bigWarning.style.display='flex'; setTimeout(()=>bigWarning.style.display='none',2000); }
function playSound(type){
  let audio=new Audio();
  if(type==='exothermic') audio.src='https://www.soundjay.com/explosion/explosion-01.mp3';
  else if(type==='endothermic') audio.src='https://www.soundjay.com/button/beep-07.mp3';
  audio.play();
}

// ===== Particle Effects =====
function createParticles(){ 
  for(let i=0;i<50;i++){ 
    animateParticle(beaker.offsetLeft+beaker.offsetWidth/2,beaker.offsetTop+50,(Math.random()-0.5)*10,-Math.random()*10-2,Math.random()*5+3,['yellow','orange','red'][Math.floor(Math.random()*3)],1000);
  } 
}
function animateParticle(x,y,dx,dy,size,color,life){ 
  let start=Date.now(); 
  let interval=setInterval(()=>{
    let t=(Date.now()-start)/life;
    if(t>=1){clearInterval(interval);return;}
    ctx.fillStyle=color;
    ctx.beginPath();
    ctx.arc(x+dx*t*life,y+dy*t*life,size*(1-t),0,Math.PI*2);
    ctx.fill();
  },16);
}
function createBubbles(){ 
  for(let i=0;i<20;i++){ 
    let b=document.createElement('div'); 
    b.className='bubble'; 
    b.style.left=Math.random()*200+'px'; 
    beaker.appendChild(b); 
    setTimeout(()=>b.remove(),2000); 
  }
}

</script>
</body>
</html>