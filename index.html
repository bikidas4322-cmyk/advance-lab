<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Class 12 Virtual Chemistry Lab</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif;}
body{overflow-x:hidden;text-align:center;color:#fff;background:#0b0c10;position:relative;}
video#bgVideo{position:fixed;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-2;filter:brightness(0.5);}
canvas#effectCanvas{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;}
.lab-container{padding:20px;position:relative;z-index:2;}
h1{margin-bottom:10px;}
.chemicals{display:flex;justify-content:center;gap:10px;margin:20px 0;flex-wrap:wrap;}
.chemical{background: rgba(255,255,255,0.2); padding:12px 20px; border-radius:10px; cursor:grab; transition: transform 0.3s;}
.chemical:active{transform:scale(1.1);}
.beaker{width:220px;height:260px;margin:0 auto;border:4px solid #fff;border-radius:0 0 20px 20px;display:flex;justify-content:center;align-items:flex-end;padding-bottom:20px;background:rgba(255,255,255,0.1);position:relative;overflow:hidden;}
#reactionResult{margin-top:20px;font-size:1.3em;min-height:60px;}
.molecule{position:absolute;width:8px;height:8px;border-radius:50%;background:rgba(0,255,255,0.5);animation: floatM 10s linear infinite;}
@keyframes floatM{0%{transform:translateY(0) translateX(0)}100%{transform:translateY(-800px) translateX(300px)}}
#presetButtons{margin-top:20px;}
.presetBtn{background:rgba(255,255,255,0.2);border:none;color:#fff;padding:10px 15px;margin:5px;border-radius:8px;cursor:pointer;transition:0.2s;}
.presetBtn:hover{background:rgba(255,255,255,0.4);}
#reactionSelector{margin-top:20px;padding:10px;border-radius:8px;border:none;font-size:1em;}
#bigWarning{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:red;color:white;font-size:5em;display:flex;justify-content:center;align-items:center;z-index:999;}
.bubble{position:absolute;width:10px;height:10px;background:rgba(255,255,255,0.8);border-radius:50%;bottom:20px;animation: rise 2s linear infinite;}
@keyframes rise {0%{transform:translateY(0);opacity:1}100%{transform:translateY(-200px);opacity:0}}
</style>
</head>
<body>

<video autoplay muted loop id="bgVideo">
<source src="https://cdn.pixabay.com/vimeo/320107802/Laboratory-320107802.mp4" type="video/mp4">
</video>

<canvas id="effectCanvas"></canvas>
<div id="bigWarning">⚠️ EXOTHERMIC REACTION! ⚠️</div>

<div class="lab-container">
<h1>Class 12 Virtual Chemistry Lab</h1>
<p>Drag chemicals into the beaker or use presets / dropdown!</p>

<div class="chemicals" id="chemicalList">
  <!-- Generated by JS -->
</div>

<div class="beaker" id="beaker"><p>Drop chemicals here</p></div>
<div id="reactionResult"></div>

<div id="presetButtons">
<!-- Quick presets -->
</div>

<select id="reactionSelector">
<option value="">Select any reaction...</option>
<!-- Dropdown generated by JS -->
</select>

</div>

<script>
// ===== Canvas Setup =====
const canvas=document.getElementById('effectCanvas');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

// ===== Chemicals =====
const chemicalsArray=['Na','H2O','HCl','NaOH','K','Cl2','Mg','O2','CaCO3','H2SO4','Cu','Fe','Zn','AgNO3','BaCl2','NH3','Pb(NO3)2','KI','Al','Fe2O3','H2','CO2','CH4','C2H5OH','Na2CO3','Ca','P','Br2','I2','SO2','Na2SO4'];

// ===== Reaction Database (partial, extendable to 200+) =====
const reactions=[
{reactants:["CH4","O2"],products:["CO2","H2O"],type:"exothermic",message:"CH₄ + 2O₂ → CO₂ + 2H₂O (Combustion of methane)"},
{reactants:["C2H6","O2"],products:["CO2","H2O"],type:"exothermic",message:"2C₂H₆ + 7O₂ → 4CO₂ + 6H₂O (Combustion of ethane)"},
{reactants:["Na","H2O"],products:["NaOH","H2"],type:"exothermic",message:"2Na + 2H₂O → 2NaOH + H₂ (Sodium + water)"},
{reactants:["K","H2O"],products:["KOH","H2"],type:"exothermic",message:"2K + 2H₂O → 2KOH + H₂ (Potassium + water)"},
{reactants:["HCl","NaOH"],products:["NaCl","H2O"],type:"endothermic",message:"HCl + NaOH → NaCl + H₂O (Neutralization)"},
{reactants:["Mg","O2"],products:["MgO"],type:"exothermic",message:"2Mg + O₂ → 2MgO (Magnesium burns)"},
{reactants:["Cu","H2SO4"],products:["CuSO4","SO2","H2O"],type:"exothermic",message:"Cu + 2H₂SO₄ → CuSO₄ + SO₂ + 2H₂O (Copper + sulfuric acid)"},
{reactants:["AgNO3","NaCl"],products:["AgCl","NaNO3"],type:"neutral",message:"AgNO₃ + NaCl → AgCl + NaNO₃ (Precipitation)"},
{reactants:["CaCO3","HCl"],products:["CaCl2","CO2","H2O"],type:"neutral",message:"CaCO₃ + 2HCl → CaCl₂ + CO₂ + H₂O (Carbonate reaction)"},

  {reactants:["CH4","O2"], products:["CO2","H2O"], type:"exothermic", message:"CH₄ + 2O₂ → CO₂ + 2H₂O (Combustion of methane)"},
  {reactants:["C2H6","O2"], products:["CO2","H2O"], type:"exothermic", message:"2C₂H₆ + 7O₂ → 4CO₂ + 6H₂O (Combustion of ethane)"},
  {reactants:["C3H8","O2"], products:["CO2","H2O"], type:"exothermic", message:"C₃H₈ + 5O₂ → 3CO₂ + 4H₂O (Combustion of propane)"},
  {reactants:["Na","H2O"], products:["NaOH","H2"], type:"exothermic", message:"2Na + 2H₂O → 2NaOH + H₂ (Sodium + water)"},
  {reactants:["K","H2O"], products:["KOH","H2"], type:"exothermic", message:"2K + 2H₂O → 2KOH + H₂ (Potassium + water)"},
  {reactants:["Mg","O2"], products:["MgO"], type:"exothermic", message:"2Mg + O₂ → 2MgO (Magnesium + oxygen)"},
  {reactants:["Fe","O2"], products:["Fe2O3"], type:"exothermic", message:"4Fe + 3O₂ → 2Fe₂O₃ (Iron rusting)"},
  {reactants:["C","O2"], products:["CO2"], type:"exothermic", message:"C + O₂ → CO₂ (Carbon combustion)"},
  {reactants:["H2","O2"], products:["H2O"], type:"exothermic", message:"2H₂ + O₂ → 2H₂O (Hydrogen combustion)"},
  {reactants:["Zn","HCl"], products:["ZnCl2","H2"], type:"exothermic", message:"Zn + 2HCl → ZnCl₂ + H₂ (Zinc + hydrochloric acid)"},
  {reactants:["Fe","H2SO4"], products:["FeSO4","H2"], type:"exothermic", message:"Fe + H₂SO₄ → FeSO₄ + H₂ (Iron + sulfuric acid)"},
  {reactants:["CaCO3","HCl"], products:["CaCl2","CO2","H2O"], type:"neutral", message:"CaCO₃ + 2HCl → CaCl₂ + CO₂ + H₂O (Calcium carbonate + HCl)"},
  {reactants:["NaHCO3","HCl"], products:["NaCl","CO2","H2O"], type:"neutral", message:"NaHCO₃ + HCl → NaCl + CO₂ + H₂O (Baking soda + HCl)"},
  {reactants:["AgNO3","NaCl"], products:["AgCl","NaNO3"], type:"neutral", message:"AgNO₃ + NaCl → AgCl + NaNO₃ (Silver nitrate + sodium chloride)"},
  {reactants:["BaCl2","Na2SO4"], products:["BaSO4","NaCl"], type:"neutral", message:"BaCl₂ + Na₂SO₄ → BaSO₄ + 2NaCl (Barium chloride + sodium sulfate)"},
  {reactants:["K2Cr2O7","HCl"], products:["KCl","CrCl3","Cl2","H2O"], type:"exothermic", message:"K₂Cr₂O₇ + 14HCl → 2KCl + 2CrCl₃ + 3Cl₂ + 7H₂O (Dichromate + HCl)"},
  {reactants:["Pb(NO3)2","KI"], products:["PbI2","KNO3"], type:"neutral", message:"Pb(NO₃)₂ + 2KI → PbI₂ + 2KNO₃ (Lead nitrate + potassium iodide)"},
  {reactants:["Cu","H2SO4"], products:["CuSO4","SO2","H2O"], type:"exothermic", message:"Cu + 2H₂SO₄ → CuSO₄ + SO₂ + 2H₂O (Copper + hot sulfuric acid)"},
  {reactants:["NH3","HCl"], products:["NH4Cl"], type:"exothermic", message:"NH₃ + HCl → NH₄Cl (Ammonia + hydrochloric acid)"},
  {reactants:["CO2","H2O"], products:["H2CO3"], type:"neutral", message:"CO₂ + H₂O → H₂CO₃ (Carbonic acid formation)"},
  {reactants:["Na2O","H2O"], products:["2NaOH"], type:"exothermic", message:"Na₂O + H₂O → 2NaOH (Sodium oxide + water)"},
  {reactants:["SO3","H2O"], products:["H2SO4"], type:"exothermic", message:"SO₃ + H₂O → H₂SO₄ (Sulfur trioxide + water)"},
  {reactants:["CaO","H2O"], products:["Ca(OH)2"], type:"exothermic", message:"CaO + H₂O → Ca(OH)₂ (Calcium oxide + water)"},
  {reactants:["Al2O3","NaOH"], products:["NaAlO2","H2O"], type:"endothermic", message:"Al₂O₃ + 2NaOH → 2NaAlO₂ + H₂O (Alumina + NaOH)"},
  {reactants:["Fe2O3","CO"], products:["Fe","CO2"], type:"exothermic", message:"Fe₂O₃ + 3CO → 2Fe + 3CO₂ (Reduction of iron(III) oxide)"},
  {reactants:["SiO2","C"], products:["Si","CO"], type:"endothermic", message:"SiO₂ + 2C → Si + 2CO (Silica reduction)"},
  {reactants:["ZnO","C"], products:["Zn","CO"], type:"endothermic", message:"ZnO + C → Zn + CO (Zinc oxide reduction)"},
  {reactants:["CuSO4","Fe"], products:["FeSO4","Cu"], type:"exothermic", message:"CuSO₄ + Fe → FeSO₄ + Cu (Displacement of copper by iron)"},
  {reactants:["Cl2","H2O"], products:["HCl","HOCl"], type:"neutral", message:"Cl₂ + H₂O ⇌ HCl + HOCl (Chlorine in water)"},
  {reactants:["Na2S2O3","HCl"], products:["NaCl","SO2","S","H2O"], type:"exothermic", message:"Na₂S₂O₃ + 2HCl → 2NaCl + SO₂ + S + H₂O"},
  {reactants:["Ag","HNO3"], products:["AgNO3","NO2","H2O"], type:"exothermic", message:"3Ag + 4HNO₃ → 3AgNO₃ + NO₂ + 2H₂O (Silver + nitric acid)"},
  {reactants:["NH4NO3","H2O"], products:["NH4+","NO3-","heat"], type:"endothermic", message:"NH₄NO₃ + H₂O → NH₄⁺ + NO₃⁻ (Dissolution of ammonium nitrate)"},
  {reactants:["NaOH","CO2"], products:["Na2CO3","H2O"], type:"neutral", message:"2NaOH + CO₂ → Na₂CO₃ + H₂O"},
  {reactants:["2KClO3","MnO2"], products:["2KCl","3O2"], type:"exothermic", message:"2KClO₃ → 2KCl + 3O₂ (Decomposition of potassium chlorate)"},
  {reactants:["H2SO4","NaCl"], products:["NaHSO4","HCl"], type:"neutral", message:"H₂SO₄ + NaCl → NaHSO₄ + HCl"},
  {reactants:["Ca","H2O"], products:["Ca(OH)2","H2"], type:"exothermic", message:"Ca + 2H₂O → Ca(OH)₂ + H₂"},
  {reactants:["Li","H2O"], products:["LiOH","H2"], type:"exothermic", message:"2Li + 2H₂O → 2LiOH + H₂"},
  {reactants:["2Al","3Cl2"], products:["2AlCl3"], type:"exothermic", message:"2Al + 3Cl₂ → 2AlCl₃ (Aluminum chloride formation)"},
  {reactants:["P4","5O2"], products:["P4O10"], type:"exothermic", message:"P₄ + 5O₂ → P₄O₁₀ (Phosphorus combustion)"},
  {reactants:["Zn","CuSO4"], products:["ZnSO4","Cu"], type:"exothermic", message:"Zn + CuSO₄ → ZnSO₄ + Cu (Zinc displaces copper)"},
  {reactants:["FeSO4","H2O2"], products:["Fe2(SO4)3","H2O"], type:"exothermic", message:"2FeSO₄ + H₂O₂ → Fe₂(SO₄)₃ + H₂O"},
  {reactants:["2H2O2"], products:["2H2O","O2"], type:"exothermic", message:"2H₂O₂ → 2H₂O + O₂ (Decomposition of hydrogen peroxide)"},
  {reactants:["C6H12O6","O2"], products:["CO2","H2O"], type:"exothermic", message:"C₆H₁₂O₆ + 6O₂ → 6CO₂ + 6H₂O (Glucose combustion)"},
  // … add up to 200 entries in the same format


// Add more reactions up to 200 here
];

// ===== Generate Chemical Buttons =====
const chemicalDiv=document.getElementById('chemicalList');
chemicalsArray.forEach(c=>{
  const el=document.createElement('div');
  el.className='chemical';
  el.id=c;
  el.draggable=true;
  el.innerHTML=c;
  chemicalDiv.appendChild(el);
});

// ===== Quick Preset Buttons =====
const presets=[{name:'Na + H2O',chems:['Na','H2O']},{name:'HCl + NaOH',chems:['HCl','NaOH']},{name:'K + H2O',chems:['K','H2O']},{name:'Mg + O2',chems:['Mg','O2']}];
const presetContainer=document.getElementById('presetButtons');
presets.forEach(p=>{
  const btn=document.createElement('button');
  btn.className='presetBtn';
  btn.innerText=p.name;
  btn.onclick=()=>triggerPreset(p.chems);
  presetContainer.appendChild(btn);
});

// ===== Reaction Dropdown =====
const reactionSelector=document.getElementById('reactionSelector');
reactions.forEach((r,i)=>{
  const opt=document.createElement('option');
  opt.value=i;
  opt.innerText=r.message;
  reactionSelector.appendChild(opt);
});
reactionSelector.onchange=function(){
  const rIndex=parseInt(this.value);
  if(!isNaN(rIndex)) triggerPreset(reactions[rIndex].reactants);
};

// ===== Drag & Drop =====
let droppedChemicals=[];
const beaker=document.getElementById('beaker');
const reactionResult=document.getElementById('reactionResult');
const bigWarning=document.getElementById('bigWarning');

document.querySelectorAll('.chemical').forEach(c=>{
  c.addEventListener('dragstart',e=>{ e.dataTransfer.setData('text',c.id); });
});
beaker.addEventListener('dragover',e=>e.preventDefault());
beaker.addEventListener('drop',e=>{
  e.preventDefault();
  const chem=e.dataTransfer.getData('text');
  if(!droppedChemicals.includes(chem)){
    droppedChemicals.push(chem);
    reactionResult.innerHTML=checkReaction(droppedChemicals);
  }
});

// ===== Functions =====
function triggerPreset(chems){
  droppedChemicals=chems.slice();
  reactionResult.innerHTML=checkReaction(droppedChemicals);
}

function checkReaction(arr){
  for(let r of reactions){
    if(r.reactants.every(c=>arr.includes(c)) && r.reactants.length===arr.length){
      if(r.type==='exothermic'){showBigWarning(); createParticles(); createFire(); playSound('exothermic');}
      else if(r.type==='endothermic'){createBubbles(); createSteam(); playSound('endothermic');}
      return r.message;
    }
  }
  return '⚠️ No significant reaction!';
}

function showBigWarning(){ bigWarning.style.display='flex'; setTimeout(()=>bigWarning.style.display='none',2000); }
function playSound(type){
  let audio=new Audio();
  if(type==='exothermic') audio.src='https://www.soundjay.com/explosion/explosion-01.mp3';
  else if(type==='endothermic') audio.src='https://www.soundjay.com/button/beep-07.mp3';
  audio.play();
}

// ===== Particle Effects =====
function createParticles(){ for(let i=0;i<50;i++){ animateParticle(beaker.offsetLeft+beaker.offsetWidth/2,beaker.offsetTop+50,(Math.random()-0.5)*10,-Math.random()*10-2,Math.random()*5+3,['yellow','orange','red'][Math.floor(Math.random()*3)],1000);} }
function animateParticle(x,y,dx,dy,size,color,life){ let start=Date.now(); let interval=setInterval(()=>{let t=(Date.now()-start)/life;if(t>=1){clearInterval(interval);return;}ctx.fillStyle=color;ctx.beginPath();ctx.arc(x+dx*t*life,y+dy*t*life,size*(1-t),0,Math.PI*2);ctx.fill();},16);}
function createFire(){ let particles=[]; for(let i=0;i<30;i++){ particles.push({x:beaker.offsetLeft+beaker.offsetWidth/2,y:beaker.offsetTop+50,dx:(Math.random()-0.5)*2,dy:-Math.random()*2-1,size:Math.random()*4+2,life:50,color:['orange','yellow','red'][Math.floor(Math.random()*3)]});} let interval=setInterval(()=>{ctx.clearRect(0,0,canvas.width,canvas.height); particles.forEach(p=>{ctx.fillStyle=p.color;ctx.beginPath();ctx.arc(p.x,p.y,p.size,0,Math.PI*2);ctx.fill();p.x+=p.dx;p.y+=p.dy;p.life--;});particles=particles.filter(p=>p.life>0);if(particles.length===0)clearInterval(interval);},16);}
function createBubbles(){ for(let i=0;i<20;i++){ let b=document.createElement('div'); b.className='bubble'; b.style.left=Math.random()*200+'px'; beaker.appendChild(b); setTimeout(()=>b.remove(),2000); }}
function createSteam(){ let particles=[]; for(let i=0;i<30;i++){ particles.push({x:beaker.offsetLeft+beaker.offsetWidth/2,y:beaker.offsetTop+50,dy:-Math.random()*1-0.5,size:Math.random()*6+3,life:60,color:'rgba(200,200,255,0.5)'});} let interval=setInterval(()=>{ctx.clearRect(0,0,canvas.width,canvas.height); particles.forEach(p=>{ctx.fillStyle=p.color;ctx.beginPath();ctx.arc(p.x,p.y,p.size,0,Math.PI*2);ctx.fill();p.y+=p.dy;p.size+=0.1;p.life--;});particles=particles.filter(p=>p.life>0);if(particles.length===0)clearInterval(interval);},16);}
</script>
</body>
</html>